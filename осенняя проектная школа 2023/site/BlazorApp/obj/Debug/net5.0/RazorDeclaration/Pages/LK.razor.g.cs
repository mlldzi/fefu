// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace BlazorApp.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using BlazorApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using BlazorApp.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using CsvHelper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using System.Globalization;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/LK")]
    public partial class LK : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 79 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/Pages/LK.razor"
       
    private string name;
    private string surname;
    private int age;
    private string city;
    private string gender;
    private string telegram;
    private string profilePictureUrl;
    private List<string> hobbies;
    private Dictionary<Hobby, string> hobbyMap = new()
    {
        { Hobby.Football, "Football" },
        { Hobby.Hockey, "Hockey" },
        { Hobby.Snowboarding, "Snowboarding" },
        { Hobby.Anime, "Anime" },
        { Hobby.GuitarPlaying, "Guitar Playing" },
        { Hobby.Startups, "Startups" },
        { Hobby.Cooking, "Cooking" },
        { Hobby.Fishing, "Fishing" },
        { Hobby.BoardGames, "Board Games" },
        { Hobby.DungeonsAndDragons, "DnD" }, // Changed to match display name
        { Hobby.Cars, "Cars" },
        { Hobby.HandAndCrafts, "Handcrafts" },
        { Hobby.Dancing, "Dancing" },
        { Hobby.Hunting, "Hunting" },
        { Hobby.Tourism, "Tourism" },
        { Hobby.Drawing, "Drawing" },
        { Hobby.Music, "Music" },
        { Hobby.HobbyHorsing, "Hobby Horsing" }, // Changed to match display name
        { Hobby.Blogging, "Blogging" },
        { Hobby.Shows, "Shows" },
        { Hobby.Movies, "Movies" },
        { Hobby.Reading, "Reading" },
        { Hobby.GraphicDesign, "Graphic Design" },
        { Hobby.Photography, "Photography" },
        { Hobby.ElectronicsAndRobotics, "Tech" }, // Changed to match display name
        { Hobby.Alcohol, "Brewing" },
        { Hobby.Parkour, "Parkour" },
        { Hobby.Fencing, "Fencing" },
        { Hobby.Yoga, "Yoga" },
        { Hobby.HorseRiding, "Horse Riding" }
    };
    protected override void OnInitialized()
    {
        if (AppData.CurrentUser == null) return;
        profilePictureUrl = "assets/ICONS/" + AppData.CurrentUser.Login + ".png";
        string fullName = AppData.CurrentUser.Name;
        name = fullName.Split(" ")[0];
        surname = fullName.Split(" ")[1];
        age = AppData.CurrentUser.Age;
        city = AppData.CurrentUser.Location;
        gender = AppData.CurrentUser.Gender;
        telegram = AppData.CurrentUser.Telegram;
        hobbies = AppData.CurrentUser.MainHobbies.Split(",").ToList();
    }
    private void Logout()
    {
        NavigationManager.NavigateTo("/");
    }
    private void Search()
    {
        NavigationManager.NavigateTo("/search");
    }

    bool isEditMode = false;

    private void EditProfile() =>
        isEditMode = true;

    private void SaveProfile()
    {
        AppData.CurrentUser.Name = name + " " + surname;
        AppData.CurrentUser.Age = age;
        AppData.CurrentUser.Location = city;
        AppData.CurrentUser.Gender = gender;
        AppData.CurrentUser.Telegram = telegram;
        //AppData.CurrentUser.MainHobbies = string.Join(",")
        isEditMode = false;
    }

    private void ToggleHobby(string hobby)
    {
        if (hobbies.Contains(hobby))
        {
            hobbies.Remove(hobby);
        }
        else
        {
            hobbies.Add(hobby);
        }
    }

    private async Task UploadProfilePicture(InputFileChangeEventArgs e)
    {
        var imageFile = e.File;
        if (imageFile != null)
        {
            var username = AppData.CurrentUser.Login;
            var newFileName = $"{username}.png";
            var uploadPath = Path.Combine("wwwroot", "assets", "ICONS", newFileName);
            using (var stream = imageFile.OpenReadStream())
            using (var fileStream = new FileStream(uploadPath, FileMode.Create))
            {
                await stream.CopyToAsync(fileStream);
                profilePictureUrl = $"assets/{newFileName}"; // Update the displayed image
            }
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Services.AppData AppData { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
#pragma warning restore 1591
