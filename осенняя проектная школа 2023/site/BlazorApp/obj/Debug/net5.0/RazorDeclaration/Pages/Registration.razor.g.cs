// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace BlazorApp.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using BlazorApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using BlazorApp.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using CsvHelper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/_Imports.razor"
using System.Globalization;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/registration")]
    public partial class Registration : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 117 "/home/runner/Zhiostkaia-viorstka-saita/BlazorApp/Pages/Registration.razor"
       
    private bool isRegistered = false;
    private string errorPassword;
    private string name;
    private string surname;
    private User user = new();
    private int step = 1;
    private Dictionary<Hobby, bool> selectedHobbies = Enum.GetValues(typeof(Hobby)).Cast<Hobby>().ToDictionary(hobby => hobby, hobby => false);

    public static readonly Dictionary<Hobby, string> HobbyToEnglish = new Dictionary<Hobby, string>
    {
        { Hobby.Football, "Football" },
        { Hobby.Hockey, "Hockey" },
        { Hobby.Snowboarding, "Snowboarding" },
        { Hobby.Anime, "Anime" },
        { Hobby.GuitarPlaying, "Guitar Playing" },
        { Hobby.Startups, "Startups" },
        { Hobby.Cooking, "Cooking" },
        { Hobby.Fishing, "Fishing" },
        { Hobby.BoardGames, "Board Games" },
        { Hobby.DungeonsAndDragons, "DND" },
        { Hobby.Cars, "Cars" },
        { Hobby.HandAndCrafts, "Handcrafts" },
        { Hobby.Dancing, "Dancing" },
        { Hobby.Hunting, "Hunting" },
        { Hobby.Tourism, "Tourism" },
        { Hobby.Drawing, "Drawing" },
        { Hobby.Music, "Music" },
        { Hobby.HobbyHorsing, "Hobby Horsing" },
        { Hobby.Blogging, "Blogging" },
        { Hobby.Shows, "Shows" },
        { Hobby.Movies, "Movies" },
        { Hobby.Reading, "Reading" },
        { Hobby.GraphicDesign, "Graphic Design" },
        { Hobby.Photography, "Photography" },
        { Hobby.ElectronicsAndRobotics, "Tech" },
        { Hobby.Alcohol, "Brewing" },
        { Hobby.Parkour, "Parkour" },
        { Hobby.Fencing, "Fencing" },
        { Hobby.Yoga, "Yoga" },
        { Hobby.HorseRiding, "Horse Riding" }
    };

    protected override void OnInitialized()
    {
        SetDefaultGender();
        foreach (Hobby hobby in Enum.GetValues(typeof(Hobby)))
        {
            selectedHobbies[hobby] = false;
        }
        base.OnInitialized();
    }


    private void NextStep()
    {
        if (step == 1)
        {
            if (string.IsNullOrEmpty(user.Login) || string.IsNullOrEmpty(user.Password))
            {
                errorPassword = "Please fill in both the login and password fields.";
            }
            else
            {
                errorPassword = null;
                step++;
            }
        }


        else if (step == 3)
        {
            CompleteRegistration();
        }
        else
        {
            step++;
        }
    }
    
    private void PreviousStep()
    {
        if (step > 1)
        {
            step--;
        }
    }

    private void CompleteRegistration()
    {
        user.Name = name + " " + surname;
        user.MainHobbies = string.Join(",", selectedHobbies.Where(h => h.Value).Select(h => h.Key).ToList());
        CsvLoader.AppendData("users.csv", user);
        AppData.CurrentUser = user;

        NavigationManager.NavigateTo("/LK");
    }

    private void GoBack() => NavigationManager.NavigateTo("/");

    private string GetInputErrorClass()
    {
        return !string.IsNullOrEmpty(errorPassword) ? "error" : "";
    }

    private void UpdateGender(ChangeEventArgs e)
    {
        user.Gender = e.Value.ToString();
    }

    private void SetDefaultGender()
    {
        user.Gender = "Male";
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Services.AppData AppData { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
#pragma warning restore 1591
